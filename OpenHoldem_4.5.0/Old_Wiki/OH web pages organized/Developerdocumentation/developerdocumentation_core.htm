<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0229)http://webcache.googleusercontent.com/search -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><HTML><HEAD>
<META content="text/html; charset=UTF-8" http-equiv="Content-Type">
<META name="GENERATOR" content="MSHTML 9.00.8112.16476"></HEAD>
<BODY class="mediawiki ns-0 ltr page-DeveloperDocumentation_Core">
<DIV style="background: rgb(255, 255, 255); margin: -1px -1px 0px; padding: 0px; border: 1px solid rgb(153, 153, 153);">
<DIV style="background: rgb(221, 221, 221); font: 13px/normal arial, sans-serif; margin: 12px; padding: 8px; border: 1px solid rgb(153, 153, 153); text-align: left; color: rgb(0, 0, 0); font-size-adjust: none; font-stretch: normal;">This 
is Google's cache of <A style="color: rgb(0, 0, 204); text-decoration: underline;" 
href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core">http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core</A>. 
It is a snapshot of the page as it appeared on Feb 27, 2013 07:40:52 GMT. The <A 
style="color: rgb(0, 0, 204); text-decoration: underline;" href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core">current 
page</A> could have changed in the meantime. <A style="color: rgb(0, 0, 204); text-decoration: underline;" 
href="http://support.google.com/websearch/bin/answer.py?hl=en&amp;p=cached&amp;answer=1687222">Learn 
more</A><BR>Tip: To quickly find your search term on this page, press 
<B>Ctrl+F</B> or <B>⌘-F</B> (Mac) and use the find bar.<BR><BR>
<DIV style="float: right;"><A style="color: rgb(0, 0, 204); text-decoration: underline;" 
href="http://webcache.googleusercontent.com/search?q=cache:mjiZhnOcFiwJ:www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core+http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core&amp;hl=en&amp;gl=us&amp;strip=1">Text-only 
version</A></DIV>
<DIV>&nbsp;</DIV></DIV></DIV>
<DIV style="position: relative;">
<META name="keywords" content="DeveloperDocumentation:Core,DeveloperDocumentation,OpenHoldem"><LINK 
rel="shortcut icon" href="/favicon.ico"><LINK title="Maxin Wiki (English)" rel="search" 
type="application/opensearchdescription+xml" 
href="/wiki/opensearch_desc.php"><TITLE>DeveloperDocumentation:Core - Maxin 
Wiki</TITLE>
<STYLE type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/wiki/skins/common/shared.css?97";
			@import "/wiki/skins/monobook/main.css?97";
		/*]]>*/</STYLE>
<LINK rel="stylesheet" type="text/css" href="developerdocumentation_core_files/commonPrint.css" 
media="print"><!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE50Fixes.css?97";</style><![endif]--><!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE55Fixes.css?97";</style><![endif]--><!--[if IE 6]><style type="text/css">@import "/wiki/skins/monobook/IE60Fixes.css?97";</style><![endif]--><!--[if IE 7]><style type="text/css">@import "/wiki/skins/monobook/IE70Fixes.css?97";</style><![endif]--><!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
<SCRIPT type="text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/wiki/skins";
var wgArticlePath = "/wiki/index.php5/$1";
var wgScriptPath = "/wiki";
var wgScript = "/wiki/index.php5";
var wgServer = "http://www.maxinmontreal.com";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "DeveloperDocumentation:Core";
var wgTitle = "DeveloperDocumentation:Core";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "237";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "614";
/*]]>*/</SCRIPT>

<SCRIPT type="text/javascript" src="developerdocumentation_core_files/wikibits.js"><!-- wikibits js --></SCRIPT>

<SCRIPT type="text/javascript" src=""><!-- site js --></SCRIPT>

<STYLE type="text/css">/*<![CDATA[*/
@import "/wiki/index.php5?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php5?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php5?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</STYLE>
<!-- Head Scripts -->
<SCRIPT type="text/javascript" src="developerdocumentation_core_files/ajax.js"></SCRIPT>

<DIV id="globalWrapper">
<DIV id="column-content">
<DIV id="content"><A id="top" name="top"></A>
<H1 class="firstHeading">DeveloperDocumentation:Core</H1>
<DIV id="bodyContent">
<H3 id="siteSub">From Maxin Wiki</H3>
<DIV id="contentSub"></DIV>
<DIV id="jump-to-nav">Jump to: <A href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core#column-one">navigation</A>, 
<A href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core#searchInput">search</A></DIV><!-- start content -->
<P><A title="OpenHoldem" href="http://www.maxinmontreal.com/wiki/index.php5/OpenHoldem">OpenHoldem</A> 
uses similar process flows for both scraped sites and for PokerPro connections. 
This flow is the core of the entire OpenHoldem platform. </P>
<P><B>Scraped sites</B>: Once a user clicks the green button and selects a table 
(CMainFrame::OnBnClickedGreenCircle), a number of things happen: </P>
<OL>
  <LI> Indexes for various entries in the current profile are created for fast 
  lookup later on. </LI>
  <LI> Bitmap placeholders are created for all relevant regions. </LI>
  <LI> Scraper and symbols variables are reset. </LI>
  <LI> Interface is updated. </LI>
  <LI> Autoplayer is turned off. </LI>
  <LI> The heartbeat thread is launched, from which all activity from then is on 
  coordinated. </LI>
  <LI> A timer is started which un-clicks the green button if the table 
  disappears for any reason. </LI>
  <LI> Logging is started. </LI></OL>
<P><B>PokerPro</B>: Once a user clicks the connect button on the ppro dialog 
(CDlgPpro::OnBnClickedConnectButton), a number of things happen: </P>
<OL>
  <LI> Symbol variables are reset. </LI>
  <LI> Interface is updated. </LI>
  <LI> Autoplayer is turned off. </LI>
  <LI> The heartbeat thread is launched, from which all activity from then is on 
  coordinated. </LI></OL>
<P><BR></P><A name="Heartbeat_thread"></A>
<H2><SPAN class="editsection">[<A title="Edit section: Heartbeat thread" href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;action=edit&amp;section=1">edit</A>]</SPAN> 
<SPAN class="mw-headline"> Heartbeat thread </SPAN></H2>
<P>As you can see, the key to both is the heartbeat thread. The heartbeat_thread 
function can be found in threads.cpp. It is a big loop that continues executing 
as long as the global variable, "heartbeat_thread_alive" is true. It performs 
the following tasks: </P>
<OL>
  <LI> If we are connected to a scrapable window, then call "scraper.DoScrape()" 
  to do the scrape and populate the internal scraper variables with the results 
  of the scrape. If we are connected to PokerPro, then call "ppro.DoScrape()" to 
  copy the information received from the PPro server into the internal "scraper" 
  variables. Note that both scraped windows and PokerPro populate the same set 
  of "scraper" variables, as the information is used in exactly the same way 
  downstream. </LI>
  <LI> Set the title of the OH window. This is done every on every heartbeat as 
  the title can change dynamically from one beat to the next. </LI>
  <LI> Calculate symbols. "symbols.CalcSymbols()" also starts the prwin iterator 
  thread if something has changed that requires a restart, or if we have not yet 
  run the thread for this table situation. </LI>
  <LI> Stop the prwin interator thread if we have folded, and it is running. 
  </LI>
  <LI> Update debug tab if the formula editor dialog is open, and the auto 
  button is pressed. </LI>
  <LI> Update scraper output window if the window is open. </LI>
  <LI> Save the current game state.</LI>
  <LI> Send the current state to the DLL, if there is one attached. </LI>
  <LI> Autoplayer: If the DLL returns false to "dl$iswait", then call either 
  ap.do_autoplayer() or ppro.DoAutoplayer().  Otherwise, if the DLL returns true 
  to "dl$iswait", then don't stand around doing nothing, but just skip 
  autoplayer for this heartbeat and continue on. </LI>
  <LI> If there are any PPro messages on the queue, then process them. </LI>
  <LI> Sleep for scrape_delay as specified in the preferences. </LI></OL>
<P><BR></P><A name="See_also"></A>
<H2><SPAN class="editsection">[<A title="Edit section: See also" href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;action=edit&amp;section=2">edit</A>]</SPAN> 
<SPAN class="mw-headline"> See also </SPAN></H2>
<UL>
  <LI> <A title="OpenHoldem" href="http://www.maxinmontreal.com/wiki/index.php5/OpenHoldem">OpenHoldem</A>
  </LI>
  <LI> <A title="DeveloperDocumentation" href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation">Developer 
  Documentation</A></LI></UL><!-- Saved in parser cache with key maxin_wiki:pcache:idhash:237-0!1!0!!en!2 and timestamp 20130227074053 -->
<DIV class="printfooter">Retrieved from "<A href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core">http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core</A>"</DIV><!-- end content -->
<DIV class="visualClear"></DIV></DIV></DIV></DIV>
<DIV id="column-one">
<DIV id="p-cactions" class="portlet">
<H5>Views</H5>
<DIV class="pBody">
<UL>
  <LI id="ca-nstab-main" class="selected"><A accessKey="c" title="View the content page [c]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/DeveloperDocumentation:Core">Article</A></LI>
  <LI id="ca-talk" class="new"><A accessKey="t" title="Discussion about the content page [t]" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=Talk:DeveloperDocumentation:Core&amp;action=edit">Discussion</A></LI>
  <LI id="ca-edit"><A accessKey="e" title="You can edit this page. Please use the preview button before saving. [e]" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;action=edit">Edit</A></LI>
  <LI id="ca-history"><A accessKey="h" title="Past versions of this page. [h]" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;action=history">History</A></LI></UL></DIV></DIV>
<DIV id="p-personal" class="portlet">
<H5>Personal tools</H5>
<DIV class="pBody">
<UL>
  <LI id="pt-login"><A accessKey="o" title="You are encouraged to log in, it is not mandatory however. [o]" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=Special:Userlogin&amp;returnto=DeveloperDocumentation:Core">Log 
  in / create account</A></LI></UL></DIV></DIV>
<DIV id="p-logo" class="portlet"><A style='background-image: url("/wiki/skins/common/images/wiki.png");' 
href="http://www.maxinmontreal.com/"></A></DIV>
<SCRIPT type="text/javascript"> if (window.isMSIE55) fixalpha(); </SCRIPT>

<DIV id="p-navigation" class="portlet">
<H5>Navigation</H5>
<DIV class="pBody">
<UL>
  <LI id="n-mainpage"><A accessKey="z" title="Visit the Main Page [z]" href="http://www.maxinmontreal.com/wiki/index.php5/Main_Page">Main 
  Page</A></LI>
  <LI id="n-portal"><A title="About the project, what you can do, where to find things" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Community_Portal">Community 
  portal</A></LI>
  <LI id="n-currentevents"><A title="Find background information on current events" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Current_events">Current 
  events</A></LI>
  <LI id="n-recentchanges"><A accessKey="r" title="The list of recent changes in the wiki. [r]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Special:Recentchanges">Recent 
  changes</A></LI>
  <LI id="n-randompage"><A accessKey="x" title="Load a random page [x]" href="http://www.maxinmontreal.com/wiki/index.php5/Special:Random">Random 
  page</A></LI>
  <LI id="n-help"><A title="The place to find out." href="http://www.maxinmontreal.com/wiki/index.php5/Help:Contents">Help</A></LI>
  <LI id="n-sitesupport"><A title="Support us" href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Site_support">Donations</A></LI></UL></DIV></DIV>
<DIV id="p-search" class="portlet">
<H5><LABEL for="searchInput">Search</LABEL></H5>
<DIV id="searchBody" class="pBody">
<FORM id="searchform" action="/wiki/index.php5/Special:Search">
<DIV><INPUT accessKey="f" id="searchInput" title="Search Maxin Wiki [f]" name="search" 
type="text"><INPUT id="searchGoButton" class="searchButton" name="go" value="Go" type="submit">&nbsp;
				<INPUT id="mw-searchButton" class="searchButton" name="fulltext" value="Search" type="submit"></DIV></FORM></DIV></DIV>
<DIV id="p-tb" class="portlet">
<H5>Toolbox</H5>
<DIV class="pBody">
<UL>
  <LI id="t-whatlinkshere"><A accessKey="j" title="List of all wiki pages that link here [j]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Special:Whatlinkshere/DeveloperDocumentation:Core">What 
  links here</A></LI>
  <LI id="t-recentchangeslinked"><A accessKey="k" title="Recent changes in pages linked from this page [k]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Special:Recentchangeslinked/DeveloperDocumentation:Core">Related 
  changes</A></LI>
  <LI id="t-upload"><A accessKey="u" title="Upload images or media files [u]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Special:Upload">Upload 
  file</A></LI>
  <LI id="t-specialpages"><A accessKey="q" title="List of all special pages [q]" 
  href="http://www.maxinmontreal.com/wiki/index.php5/Special:Specialpages">Special 
  pages</A></LI>
  <LI id="t-print"><A accessKey="p" title="Printable version of this page [p]" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;printable=yes">Printable 
  version</A></LI>
  <LI id="t-permalink"><A title="Permanent link to this version of the page" 
  href="http://www.maxinmontreal.com/wiki/index.php5?title=DeveloperDocumentation:Core&amp;oldid=614">Permanent 
  link</A></LI></UL></DIV></DIV></DIV><!-- end of the left (by default at least) column -->
<DIV class="visualClear"></DIV>
<DIV id="footer">
<DIV id="f-poweredbyico"><A href="http://www.mediawiki.org/"><IMG alt="Powered by MediaWiki" 
src="developerdocumentation_core_files/poweredby_mediawiki_88x31.png"></A></DIV>
<UL id="f-list">
  <LI id="lastmod"> This page was last modified 16:11, 13 March 2008.</LI>
  <LI id="viewcount">This page has been accessed 2,121 times.</LI>
  <LI id="privacy"><A title="Maxin Wiki:Privacy policy" href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Privacy_policy">Privacy 
  policy</A></LI>
  <LI id="about"><A title="Maxin Wiki:About" href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:About">About 
  Maxin Wiki</A></LI>
  <LI id="disclaimer"><A title="Maxin Wiki:General disclaimer" href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:General_disclaimer">Disclaimers</A></LI></UL></DIV>
<SCRIPT type="text/javascript">if (window.runOnloadHook) runOnloadHook();</SCRIPT>
</DIV><!-- Served in 0.095 secs. --></DIV></BODY></HTML>
