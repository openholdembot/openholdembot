<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2015-03-18"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Converted document</title>
</head>
<body>
<div id="globalWrapper">
<h2 class="Section">
<a class="toc" name="toc-Section-1"></a>Hash Records
</h2>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-1"></a>Description 
</h3>
<div class="Unindented">
The purpose of Hash Records is to allow for the rapid lookup of pixel patterns, without having to scan through each pixel in a region to find a match. For example, if we have a card region specified to use a “Hash0” transform, the screen scraper engine will first reduce the pixels in that region to a 32-bit hash value. (A link to Bob Jenkins’ hash algorithm that is used in this project can be found in the references section) Once the screen scraper engine has calculated the 32-bit hash value, it looks to see if there exists a matching 32-bit value in the associated group of Hash Records, in this example, group 0. If a matching 32-bit hash value is found, the screen scraper engine returns the &lt;name&gt; of the Hash Record to the game state engine. 
</div>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-2"></a>Manipulating hash records using OpenScrape
</h3>
<div class="Unindented">
Hash Records are created from specific Image records, so in order to create a Hash record, you must first have collected the associated Image record (see section {4.9}).
</div>
<div class="Indented">
<img class="embedded" src="images/OS_editor_create_hash.png" alt="figure images/OS_editor_create_hash.png" style="max-width: 318px; max-height: 36px;"/>

</div>
<div class="Indented">
The “Create Hash” buttons on the Table Map Editor window are used to create new Hash records. Button “0” creates Hash records in the Hash0 group, button “1” creates Hash records in the Hash1 group, and so on. These buttons are only available if an Image record has been selected in the tree display on the Table Map Editor window. 
</div>
<div class="Indented">
Note: Only one Hash record can exist in a Table Map in each hash group for any given Image record. Otherwise, there would be collisions, and the screen scraper engine would not know which Hash record was the correct match. In the “Create Hash Record buttons” screenshot above, Hash records for group 0 and 2 have already been created for the selected Image record, so those buttons are grayed out.
</div>
<div class="Indented">
To create a new Hash records: 
</div>
<ol>
<li>
Select an Image record 
</li>
<li>
Click the “Create Hash” button for the hash group that you want to create this Hash record in.
</li>

</ol>
<div class="Unindented">
The following window will then appear to confirm the addition of the new Hash record: 
</div>
<div class="Indented">
<img class="embedded" src="images/OS_editor_hash_conformation.png" alt="figure images/OS_editor_hash_conformation.png" style="max-width: 181px; max-height: 99px;"/>

</div>
<div class="Indented">
When you add a new Hash record with the “Create Hash” buttons, OpenScrape will calculate the hash value for you and add it to the record. (This is new behavior in 2.0; previous versions stored a zero hash value on new record creation) However, sometimes you may need to change that stored hash value, if for example, you replace the underlying Image record, or you change the number or location of the related Hash Points. If one or more hash values need to be updated, use the “Update Hashes” option on the Edit manu on the Main window, and the hash values on all Hash records will be re-calculated. Technical Reference In the Table Map (.tm) file, these records will be preceded with the characters "h$". Hash records have the following format: 
</div>
<div class="Indented">
h&lt;n&gt;$&lt;name&gt; &lt;value&gt;
</div>
<div class="Indented">
&lt;n&gt; is the group (1-3) that this hash record belongs to &lt;name&gt; is the string that is returned to the scraper engine upon a match (the “result”) &lt;value&gt; is a 32bit hexadecimal value that contains the calculated hash .
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2015-03-18T20:57:18.750000</span>
</div>
</div>
</body>
</html>
