<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2015-03-20"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Converted document</title>
</head>
<body>
<div id="globalWrapper">
<h1 class="Chapter">
<a class="toc" name="toc-Chapter-1"></a><a class="IndexReference" name="entry-Scraping-0" href="#index-Scraping">↓</a>Scraping In Practice
</h1>
<h2 class="Section">
<a class="toc" name="toc-Section-1"></a>How Do I Make A Map
</h2>
<div class="Unindented">
This tutorial has been contributed by Ares® at <a class="FlexURL" href="http://www.maxinmontreal.com/forums/viewtopic.php?f=117&amp;t=6547">http://www.maxinmontreal.com/forums/viewtopic.php?f=117&amp;t=6547</a>. 
</div>
<div class="Indented">
Here I will show you how I make a map from start to finish. I do not know if this is the right way, but this is what I do. At first we check the version to avoid any surürises if the casino updates. These casino updates rarely affect the table-display, but sometimes they do and throw the scraper off.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/01_version.jpg" alt="figure images_how_to_create_a_map/01_version.jpg" style="max-width: 427px; max-height: 187px;"/>

</div>

</div>

</div>
<div class="Indented">
Then we choose proper settings amd disable useless features like avatars and animations that could affect scraping. I also enable other features that ease scraping, especially the four-colour-deck.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/02_settings.jpg" alt="figure images_how_to_create_a_map/02_settings.jpg" style="max-width: 579px; max-height: 479px;"/>

</div>

</div>

</div>
<div class="Indented">
Then we choose a nice table-view, the simpler the better.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/03_table_view_selection.jpg" alt="figure images_how_to_create_a_map/03_table_view_selection.jpg" style="max-width: 573px; max-height: 369px;"/>

</div>

</div>

</div>
<div class="Indented">
This is how our poker table looks with our preferred settings
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/04_table_with_settings.jpg" alt="figure images_how_to_create_a_map/04_table_with_settings.jpg" style="max-width: 801px; max-height: 662px;"/>

</div>

</div>

</div>
<div class="Indented">
Checking this table display, we notice some good things and also some possible problems to care about:
</div>
<ul>
<li>
fonts are two colors, we have to use pXname / uXname for the names and pXbalance / uXbalance for the balance. In similar cases we might consider to use the background-colour in combination with a negative radius to accept both foreground-colours at once, but here we have two different background-colours, therefore this alternative approach can hardly be used.
</li>
<li>
the dealer button is large and well positioned 
</li>
<li>
the cards are always exactly the same. Therefore we can use hashes, images or fuzzy fonts, but I will use hashes, as they are the most easy ones and the fastest. 
</li>
<li>
it might happen, that large chip-stacks occlude opponents card-backs.
</li>

</ul>
<h3 class="Subsection">
<a class="toc" name="toc-Subsection-1"></a>Scraping Cards
</h3>
<div class="Unindented">
There are three methods to collect cards
</div>
<ul>
<li>
using hashes, i.e. using the image to compute a number and then doing a quick search for a match. This is the most simple method, but it requires that each card gets displayed exactly identically, at all times and at all possible places. We will ise hashes here, as Full-Tilt is a bot-friendly casino from a scraping point of view.
</li>
<li>
using images. This approach is similar to the one above, but it requires more resources. This approach will be discussed in another chapter of this manual.
</li>
<li>
using fuzzy fonts. This is &ldquo;true screen-reading&rdquo;, somewhat more complicated, but it is possible to recognize cards that get displayed each time a little bit differently. Again we will discuss this method in another chapter.
</li>

</ul>
<div class="Unindented">
So let’s start with the card-scraping. We have 5 common-cards and 2 hole-cards in the situation below.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/05_starting_card_scraping.jpg" alt="figure images_how_to_create_a_map/05_starting_card_scraping.jpg" style="max-width: 1076px; max-height: 665px;"/>

</div>

</div>

</div>
<div class="Indented">
As you can see I pre-created 5 regions for the common cards, but in order to be able to define their size and position we have to care about my hole-cards. One of them is partially occluded and we would like to recognize all cards with the same hashes, therefore this card defines the size of our scraping region.
</div>
<div class="Indented">
<div class="listing">
<pre class="listing">width  381 - 368 = 13
height 431 - 395 = 36 
</pre>
</div>

</div>
<div class="Indented">
Please have a look at the region marked by arrow 3.The left border of the region matches the border of the card, but at the top is a free distance of one pixel. That’s how we will align the regions for the common cards too.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/06_defining_size_of_regions_for_common_cards.jpg" alt="figure images_how_to_create_a_map/06_defining_size_of_regions_for_common_cards.jpg" style="max-width: 1103px; max-height: 675px;"/>

</div>

</div>

</div>
<div class="Indented">
Next step: we take the size of the card-scraping region (13x36) and apply it to the common cards. All regions now appear with the correct size. but in the upper left corner (0, 0), as the position is still undefined (please see the blue arrow). Now we select these regions and click-drag them to the right places
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/07_common_cards_aligned.jpg" alt="figure images_how_to_create_a_map/07_common_cards_aligned.jpg" style="max-width: 570px; max-height: 921px;"/>

</div>

</div>

</div>
<div class="Indented">
Now the common-cards are done. Always make sure that we use the same alignment for all cards.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/08_common_cards_aligned_on_white_background.jpg" alt="figure images_how_to_create_a_map/08_common_cards_aligned_on_white_background.jpg" style="max-width: 764px; max-height: 522px;"/>

</div>

</div>

</div>
<div class="Indented">
Now we check the alignment of the common cards. All regions should have the same height. The space between two regions should be equal. If the position of the fourth card can change (Ipoker, CakePoker) we should use fuzzy fonts.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/09_checking_alignment_of_common_cards.jpg" alt="figure images_how_to_create_a_map/09_checking_alignment_of_common_cards.jpg" style="max-width: 552px; max-height: 340px;"/>

</div>

</div>

</div>
<div class="Indented">
After I have aligned the common cards I will create and align the cards for all players. Once this got done, I will seek a play money table, the most loose one I can get. This is one of the secrets of quick TM creation; I already managed to get 20 cards at once. So now I will create the regions p0cardface0 / p0cardface1. In OpenSrape I already created the region for the first player (player0). You can see that I chose the correct size of 13x36 and also chose hash0 transform. Now I save the tablemap and close OpenScrape to clone these regions with an editor..
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/10_card_for_player0.jpg" alt="figure images_how_to_create_a_map/10_card_for_player0.jpg" style="max-width: 512px; max-height: 627px;"/>

</div>

</div>

</div>
<div class="Indented">
Here I opened the file in a text editor. You can see the two regions that we created for the first player.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/11_p0cardfaceY_in_editor.jpg" alt="figure images_how_to_create_a_map/11_p0cardfaceY_in_editor.jpg" style="max-width: 484px; max-height: 383px;"/>

</div>

</div>

</div>
<div class="Indented">
Now I copy and paste the region’s of the first player several times...
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/12_p0cardfaceY_in_editor_semi_cloned.jpg" alt="figure images_how_to_create_a_map/12_p0cardfaceY_in_editor_semi_cloned.jpg" style="max-width: 485px; max-height: 447px;"/>

</div>

</div>

</div>
<div class="Indented">
...and rename the cloned ones, so that we get cardfaces for all 9 players (p0...p8).
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/13_p0cardfaceY_in_editor_cloned.jpg" alt="figure images_how_to_create_a_map/13_p0cardfaceY_in_editor_cloned.jpg" style="max-width: 508px; max-height: 468px;"/>

</div>

</div>

</div>
<div class="Indented">
(On a side-note: cloning regions became more easy in the mean-time. Just create all regions for player0 and the balance-regions for all other players, plus the first common cards. Then click Menu → Edit → Clone Regions and all other regions will be created and even aligned to reasonable places. All you have to do is a little bit of fine-tuning the positions.)
</div>
<div class="Indented">
In the next screenshot you see all cloned regions in OpenScrape, ready for positioning by drag and drop. 
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/14_clone_regions_ready_for_positioning.jpg" alt="figure images_how_to_create_a_map/14_clone_regions_ready_for_positioning.jpg" style="max-width: 600px; max-height: 696px;"/>

</div>

</div>

</div>
<div class="Indented">
<i>Be careful!</i> 
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/15_new_version.jpg" alt="figure images_how_to_create_a_map/15_new_version.jpg" style="max-width: 431px; max-height: 189px;"/>

</div>

</div>

</div>
<div class="Indented">
Today we received a gift from Ultimatebet. Their client has been updated, but it was only an update of internal functions, nothing that affected the user-interface. This is mostly the case with casino updates and one of the benefits of scraping: updates might happen often, but the interface changes rarely and mostly only slightly. But always be aware of updates.
</div>
<div class="Indented">
Now let’s continue with the good work: drag and drop. Select the region you want to move, in the example "p7cardface0". The region will be flashing in yellow. Press the "Shift" key, put the mouse pointer over the region, click and move the region to the desired place. placing conventions: player0 sits at 1-o-clocl-position, the other players are seated clockwise..
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/16_starting_drag_and_drop.jpg" alt="figure images_how_to_create_a_map/16_starting_drag_and_drop.jpg" style="max-width: 609px; max-height: 643px;"/>

</div>

</div>

</div>
<div class="Indented">
Do you notice the cards marked with arrows? They are not aligned properly. You can check this if you select them while they show cards.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/17_checking_alignment.jpg" alt="figure images_how_to_create_a_map/17_checking_alignment.jpg" style="max-width: 1196px; max-height: 673px;"/>

</div>

</div>

</div>
<div class="Indented">
We have to fine-tune these regions, so that all are aligned properly.
</div>
<div class="Indented">
<div class="float">
<div class="table">
<table>
<tr>
<td align="center" valign="top">
<img class="embedded" src="images_how_to_create_a_map/18_checking_alignment_with_card_faces.jpg" alt="figure images_how_to_create_a_map/18_checking_alignment_with_card_faces.jpg" style="max-width: 129px; max-height: 211px;"/>

</td>
<td align="center" valign="top">
<img class="embedded" src="images_how_to_create_a_map/18_checking_alignment_with_card_faces_b.jpg" alt="figure images_how_to_create_a_map/18_checking_alignment_with_card_faces_b.jpg" style="max-width: 126px; max-height: 237px;"/>

</td>
<td align="center" valign="top">
<img class="embedded" src="images_how_to_create_a_map/18_checking_alignment_with_card_faces_c.jpg" alt="figure images_how_to_create_a_map/18_checking_alignment_with_card_faces_c.jpg" style="max-width: 114px; max-height: 200px;"/>

</td>
<td align="center" valign="top">
<img class="embedded" src="images_how_to_create_a_map/18_checking_alignment_with_card_faces_d.jpg" alt="figure images_how_to_create_a_map/18_checking_alignment_with_card_faces_d.jpg" style="max-width: 126px; max-height: 207px;"/>

</td>
<td align="center" valign="top">
<img class="embedded" src="images_how_to_create_a_map/18_checking_alignment_with_card_faces_e.jpg" alt="figure images_how_to_create_a_map/18_checking_alignment_with_card_faces_e.jpg" style="max-width: 120px; max-height: 202px;"/>

</td>

</tr>

</table>

</div>

</div>

</div>
<div class="Indented">
Checking alignment again. Pay close attention; if one region is misaligned, all data collected from this region will be wrong.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/19_OS_with_aligned_cards.jpg" alt="figure images_how_to_create_a_map/19_OS_with_aligned_cards.jpg" style="max-width: 800px; max-height: 665px;"/>

</div>

</div>

</div>
<div class="Indented">
Now we start collecting cards 
</div>
<ol>
<li>
select the region 
</li>
<li>
click "Create Image" 
</li>
<li>
choose a good name like &ldquo;8s&rdquo;
</li>
<li>
click "OK"
</li>

</ol>
<div class="Unindented">
Repeat this process until all cards are collected.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/20_collecting_cards.jpg" alt="figure images_how_to_create_a_map/20_collecting_cards.jpg" style="max-width: 977px; max-height: 668px;"/>

</div>

</div>

</div>
<div class="Indented">
Creating hashes — step 1
</div>
<ol>
<li>
select image (8s) 
</li>
<li>
click "Creat Hash" 
</li>
<li>
select "Hash 0" 
</li>
<li>
click "OK"
</li>

</ol>
<div class="Unindented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/21_creating_hashes.jpg" alt="figure images_how_to_create_a_map/21_creating_hashes.jpg" style="max-width: 724px; max-height: 755px;"/>

</div>

</div>

</div>
<div class="Indented">
Creating hashes — step 2
</div>
<ol>
<li>
Click Menu → Edit
</li>
<li>
Click Update Hashes
</li>

</ol>
<div class="Unindented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/22_updating_hashes.jpg" alt="figure images_how_to_create_a_map/22_updating_hashes.jpg" style="max-width: 922px; max-height: 661px;"/>

</div>

</div>

</div>
<div class="Indented">
Now OpenScrape already recognizes the card "8s"
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/23_OS_recognizing_8s.jpg" alt="figure images_how_to_create_a_map/23_OS_recognizing_8s.jpg" style="max-width: 871px; max-height: 664px;"/>

</div>

</div>

</div>
<div class="Indented">
As the next step we would like to create the regions "pXbet", but the picture below shows an occlusion of "bets" by chip-stacks. Scraping the bet-amount is the preferred solution, as it is easy and doesn’t utilize the CPU much. Unfortunately the occlusions prevents scraping the bet-amounts directly in our case. Therefore we have to use the alternative "chip scraping", i.e. recognizing and counting chip-stacks. We will use the regions pXchip00, pXchip01 and pXchip10 for players, i.e. the bottom chip of the left-most stack, the 2nd-chip in the same stack and the bottom-chip in the 2nd stack. All other chgip positions are then welldefined. The common pots work similar: c0potXchip00, c0potXchip01, c0potXchip10 for pots.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
, <img class="embedded" src="images_how_to_create_a_map/24_bets_occluded_by_chips.jpg" alt="figure images_how_to_create_a_map/24_bets_occluded_by_chips.jpg" style="max-width: 803px; max-height: 664px;"/>

</div>

</div>

</div>
<div class="Indented">
Chip scraping
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/25_chip_scraping.jpg" alt="figure images_how_to_create_a_map/25_chip_scraping.jpg" style="max-width: 799px; max-height: 664px;"/>

</div>

</div>

</div>
<div class="Indented">
The timer of player8 covers the chip-stack partially. Therefore I will reduce the size of the scraped region to 22x7. 
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/26_chips_occluded_by_timer.jpg" alt="figure images_how_to_create_a_map/26_chips_occluded_by_timer.jpg" style="max-width: 805px; max-height: 669px;"/>

</div>

</div>

</div>
<div class="Indented">
Then I open the TM in a text editor and pre-create the new regions, just like i did with the cards before.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/27_chips_precreated_in_TM.jpg" alt="figure images_how_to_create_a_map/27_chips_precreated_in_TM.jpg" style="max-width: 522px; max-height: 505px;"/>

</div>

</div>

</div>
<div class="Indented">
The best place to align the pXchipXX regions is in blinds, because here we get to see often single chips.
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/28_chip_scraping_blinds.jpg" alt="figure images_how_to_create_a_map/28_chip_scraping_blinds.jpg" style="max-width: 876px; max-height: 663px;"/>

</div>

</div>

</div>
<div class="Indented">
The chip should be collected as an image. The name of the picture must have a "$" at the beginning (examples: $0.01, $0.25, $1, $5, $100000)
</div>
<div class="Indented">
<div class="float">
<div class="figure">
<img class="embedded" src="images_how_to_create_a_map/29_named_chips.jpg" alt="figure images_how_to_create_a_map/29_named_chips.jpg" style="max-width: 865px; max-height: 662px;"/>

</div>

</div>

</div>
<div class="Indented">
Hash Points
</div>
<div class="Indented">
To use any other kind of hash, excluding "hash0" must create new hash points. To this we must use the "Hash Point Graphical Editor"
</div>
<div class="Indented">
1 - click Hash Points 2 - click edit 3 - select the hash 4 - select one chip image 5 - zoom to 16x
</div>
<div class="Indented">
click where it marked with arrows
</div>
<div class="Indented">
see created two new hash points to the "hash1" click "OK"
</div>
<div class="Indented">
I was forced to change the position of the hash point, the chip of One Dollar was causing error.
</div>
<div class="Indented">
Re: How do I make a map PostPosted: Sat Dec 06, 2008 7:27 pm Offline Posts Too Much User avatar
</div>
<div class="Indented">
Joined: Wed Jan 02, 2008 5:04 am Posts: 1311 Location: Portugal direction of increased chip
</div>
<div class="Indented">
order of alignment
</div>
<div class="Indented">
pXchip00 is the first, pXchip01 always on top and pXchip10 always in the direction of increase
</div>
<div class="Indented">
pXchipXX aligned
</div>
<div class="Indented">
Connecting the table
</div>
<div class="Indented">
to connect a table need only 2 things - clientsize - titletext
</div>
<div class="Indented">
clientsize
</div>
<div class="Indented">
OpenScrape provides the size of table, create the "clientsize" and define the size
</div>
<div class="Indented">
titletext
</div>
<div class="Indented">
here we see 3 title NL, FL, PL Always look for a string that is in every title the strig "Holdem" is equal in all
</div>
<div class="Indented">
we add the string "Holdem"
</div>
<div class="Indented">
to verify that the "bets" work properly we need to add the number of players
</div>
<div class="Indented">
Re: How do I make a map
</div>
<div class="Indented">
Common Pots
</div>
<div class="Indented">
for the "common pots" are used these 3 symbols c0potXchip00, c0potXchip01 and c0potXchip10.
</div>
<div class="Indented">
most sites has 3 pots
</div>
<div class="Indented">
This site has 5 pots
</div>
<div class="Indented">
*the fifth pot does not appear in the picture, only show the location
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2015-03-20T12:20:45.046000</span>
</div>
</div>
</body>
</html>
