<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2014-12-26"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Converted document</title>
</head>
<body>
<div id="globalWrapper">
<h2 class="Section">
<a class="toc" name="toc-Section-1"></a>Setting process CPU affinity - Sample Code 
</h2>
<div class="Unindented">
In some cases it may be beneficial to force poker client process to work off one CPU in multiprocessor machines (or dual VCPU VMs). Good example is OnGame, which uses much more CPU on dual CPU machines than on single CPU machines. This is of course a problem with their software but they are unlikely to fix it.
</div>
<div class="Indented">
The downside is that poker software operations (browsing lobby, updates, table management, etc.) are now forced to work with one CPU, so multitabling (4+) may be taxing CPU0 - make sure to observe the behaviour with and without forcing affinity, and draw your own conclusions.
</div>
<div class="Indented">
Here is the code that will set the CPU affinity of PokerClient_Exe to CPU0 (first CPU): Only one process should exist, $PokerClient_Exe is your lobby.
</div>
<div class="Indented">
<div class="listing">
<pre class="listing">Local $PIDs = ProcessList($PokerClient_Exe) 
Local $OpenProcessHandle = _WinAPI_OpenProcess(
    $PROCESS_QUERY_INFORMATION+$PROCESS_SET_INFORMATION, False, $PIDs[1][1]) 
Local $Process_Affinity_Before_Setting = _WinAPI_GetProcessAffinityMask(
    $OpenProcessHandle) 
;MsgBox(0, "Affinity Before Setting", $Process_Affinity_Before_Setting, 3)
_WinAPI_SetProcessAffinityMask($OpenProcessHandle, 0x01)
$Process_Affinity_After_Setting = _WinAPI_GetProcessAffinityMask(
    $OpenProcessHandle) 
;MsgBox(0,"Affinity After Setting", $Process_Affinity_After_Setting, 3) 
</pre>
</div>

</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2014-12-26T22:09:37.671000</span>
</div>
</div>
</body>
</html>
