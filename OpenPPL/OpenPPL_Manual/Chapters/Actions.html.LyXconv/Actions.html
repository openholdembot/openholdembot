<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title></title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html --> 
<meta name="src" content="Actions.tex"> 
<meta name="date" content="2014-01-14 03:00:00"> 
<link rel="stylesheet" type="text/css" href="Actions.css"> 
</head><body 
>


   <h2 class="likechapterHead"><a 
 id="x1-1000"></a>Actions</h2>
<!--l. 27--><p class="noindent" >The main code sections of Open-PPL consist of when-conditions with actions. They look
e.g. like this:
   <!--l. 30-->
   <div class="lstlisting" id="listing-1"><span class="label"><a 
 id="x1-1001r1"></a></span>CUSTOM&#x00A0;<br /><span class="label"><a 
 id="x1-1002r2"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-1003r3"></a></span>PREFLOP&#x00A0;<br /><span class="label"><a 
 id="x1-1004r4"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-1005r5"></a></span>//&#x00A0;Openraising&#x00A0;on&#x00A0;the&#x00A0;button&#x00A0;<br /><span class="label"><a 
 id="x1-1006r6"></a></span>WHEN&#x00A0;(Raises&#x00A0;=&#x00A0;0&#x00A0;and&#x00A0;Calls&#x00A0;=&#x00A0;0&#x00A0;and&#x00A0;StillToAct&#x00A0;=&#x00A0;2)&#x00A0;<br /><span class="label"><a 
 id="x1-1007r7"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;Normal&#x00A0;openraises&#x00A0;<br /><span class="label"><a 
 id="x1-1008r8"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;WHEN&#x00A0;((Hand&#x00A0;=&#x00A0;AA)&#x00A0;or&#x00A0;(Hand&#x00A0;=&#x00A0;KK)...)&#x00A0;RAISE&#x00A0;3&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-1009r9"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;Pushing&#x00A0;according&#x00A0;to&#x00A0;Sklanky&#x00A0;<br /><span class="label"><a 
 id="x1-1010r10"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;WHEN&#x00A0;(StackSize&#x00A0;&#x003C;&#x00A0;20&#x00A0;and&#x00A0;((Hand&#x00A0;=&#x00A0;...)&#x00A0;OR&#x00A0;...))&#x00A0;RAISEMAX&#x00A0;FORCE
   </div>
<!--l. 44--><p class="indent" >   OpenPPL provides 3 kinds of actions:
   <h3 class="sectionHead"><a 
 id="x1-2000"></a>Actions with Fixed Betsize</h3>
<!--l. 49--><p class="noindent" >Examples look like
   <!--l. 51-->
   <div class="lstlisting" id="listing-2"><span class="label"><a 
 id="x1-2001r1"></a></span>BET&#x00A0;3&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-2002r2"></a></span>RAISE&#x00A0;15&#x00A0;FORCE
   </div>
<!--l. 55--><p class="indent" >   The final betsize is measured in bigblinds, and not in dollars like for OpenHoldems
f$betsize function, so it works independent of the limit or blind-level. The translator
cares about that difference automatically.
   <h3 class="sectionHead"><a 
 id="x1-3000"></a>Actions with Relative Betsize</h3>
<!--l. 62--><p class="noindent" >Examples look like
   <!--l. 64-->
   <div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-3001r1"></a></span>BET&#x00A0;30%&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-3002r2"></a></span>RAISE&#x00A0;70%&#x00A0;FORCE
   </div>
<!--l. 68--><p class="indent" >   Here the betsize gets measured as a certain percentage of the pot (pot = common
pot + all players bets + the amount to call).
   <h3 class="sectionHead"><a 
 id="x1-4000"></a>Fixed Actions</h3>
<!--l. 74--><p class="noindent" >Examples look like
   <!--l. 76-->
   <div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-4001r1"></a></span>BETMAX&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4002r2"></a></span>RAISEMAX&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4003r3"></a></span>AALLIN&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;synonym&#x00A0;for&#x00A0;BetMax&#x00A0;and&#x00A0;RaiseMax,&#x00A0;but&#x00A0;no&#x00A0;standard&#x00A0;PPL&#x00A0;<br /><span class="label"><a 
 id="x1-4004r4"></a></span>BETPOT&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4005r5"></a></span>RAISEPOT&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4006r6"></a></span>BETHALFPOT&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4007r7"></a></span>RAISEHALFPOT&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4008r8"></a></span>BET&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;min<span 
class="cmsy-10">-</span>bet&#x00A0;(fixed&#x00A0;limit)&#x00A0;<br /><span class="label"><a 
 id="x1-4009r9"></a></span>RAISE&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;min<span 
class="cmsy-10">-</span>raise&#x00A0;(fixed&#x00A0;limit)&#x00A0;<br /><span class="label"><a 
 id="x1-4010r10"></a></span>CALL&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4011r11"></a></span>CHECK&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4012r12"></a></span>FOLD&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-4013r13"></a></span>BEEP&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;beep,&#x00A0;but&#x00A0;don#t&#x00A0;act&#x00A0;<br /><span class="label"><a 
 id="x1-4014r14"></a></span>SITOUT&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;OpenHoldem&#x00A0;will&#x00A0;first&#x00A0;check/fold,&#x00A0;then&#x00A0;sitout&#x00A0;<br /><span class="label"><a 
 id="x1-4015r15"></a></span>CLOSE&#x00A0;FORCE&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;//&#x00A0;OpenHoldem&#x00A0;will&#x00A0;check/fold,&#x00A0;sitout,&#x00A0;then&#x00A0;close&#x00A0;the&#x00A0;table
   </div>
<!--l. 93--><p class="indent" >   Contrary to standard PPL OpenPPL does not distinguish bets and raises. The
generated OH-script-code looks exactly the same and OpenHoldem makes no difference
anyway.

   <h3 class="sectionHead"><a 
 id="x1-5000"></a>Using expressions for the bet-amount</h3>
<!--l. 100--><p class="noindent" >Lets assume you want to raise to 3 bb in an unraised pot, plus 1 bb for each caller. With
standard PPL this would result in clumsy code. But with OpenPPL you can simply
write:
   <!--l. 104-->
   <div class="lstlisting" id="listing-5"><span class="label"><a 
 id="x1-5001r1"></a></span>WHEN&#x00A0;(Raises&#x00A0;=&#x00A0;0)&#x00A0;RAISE&#x00A0;(3&#x00A0;+&#x00A0;Calls)&#x00A0;FORCE
   </div>
<!--l. 109--><p class="indent" >   If you want you could take this to extremes and write good code like the
following:
   <!--l. 112-->
   <div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x1-5002r1"></a></span>NEW&#x00A0;SYMBOL&#x00A0;MyFavouriteBetsizeForDryBoards&#x00A0;<br /><span class="label"><a 
 id="x1-5003r2"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;...&#x00A0;<br /><span class="label"><a 
 id="x1-5004r3"></a></span>END&#x00A0;SYMBOL&#x00A0;<br /><span class="label"><a 
 id="x1-5005r4"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-5006r5"></a></span>WHEN&#x00A0;(...)&#x00A0;RAISE&#x00A0;(MyFavouriteBetsizeForDryBoards)&#x00A0;FORCE
   </div>
<!--l. 121--><p class="indent" >   Please note that in both cases extra brackets are mandatory.
   <h3 class="sectionHead"><a 
 id="x1-6000"></a>Being strict: using &#8220;FORCE&#8221;</h3>
<!--l. 126--><p class="noindent" >Every action in OpenPPL has to be terminated by the keyword &#8220;FORCE&#8221;. For standard
PPL this keyword was optional. If you left it out, it meant, that the bot continued to
evaluate and finally fell back to the default logic. We deviated from that behaviour,
as:
           <ul class="itemize1">
        <li class="itemize">in our opinion it does not make any sense to specify actions that have no
        effect.
           </li>
        <li class="itemize">OpenPPL does not provide a default bot.</li></ul>
   <h3 class="sectionHead"><a 
 id="x1-7000"></a>Quickfolding bad hands</h3>
<!--l. 138--><p class="noindent" >Most poker-sites provide pre-action-buttons to act before it is your turn. Especially
useful is the prefold-button that makes it possible to click bad hands away and forget
about them. Being able to click this button with your bot has at least two positive effect:
more human-like behaviour and playing more hands per hour due to faster actions .
Nothing could be more easy:
   <!--l. 145-->
   <div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x1-7001r1"></a></span>CUSTOM&#x00A0;<br /><span class="label"><a 
 id="x1-7002r2"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-7003r3"></a></span>PREFOLD&#x00A0;<br /><span class="label"><a 
 id="x1-7004r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;WHEN&#x00A0;((AmountToCall&#x00A0;&#x003E;&#x00A0;0)&#x00A0;AND&#x00A0;((Hand&#x00A0;=&#x00A0;32)&#x00A0;OR&#x00A0;(Hand&#x00A0;=&#x00A0;42)&#x00A0;OR&#x00A0;...))&#x00A0;FOLD&#x00A0;FORCE&#x00A0;<br /><span class="label"><a 
 id="x1-7005r5"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-7006r6"></a></span>PREFLOP&#x00A0;<br /><span class="label"><a 
 id="x1-7007r7"></a></span>...
   </div>

   <h4 class="subsectionHead"><a 
 id="x1-8000"></a>Be aware of potentially unstable game-states!</h4>
<!--l. 159--><p class="noindent" >Please note:
           <ul class="itemize1">
        <li class="itemize">prefold gets evaluated when it is <span 
class="ecti-1000">not your turn</span>. Therefore it might happen that
        OpenHoldem takes a screenshot, evaluates and acts while the casino updates its
        table-display and the game-state is unstable. &#8220;Garbage in &#8211; garbage
        out&#8221; will happen. Now lets assume you have some super-nitty bot:
        <!--l. 166-->
           <div class="lstlisting" id="listing-8"><span class="label"><a 
 id="x1-8001r1"></a></span>CUSTOM&#x00A0;<br /><span class="label"><a 
 id="x1-8002r2"></a></span>&#x00A0;<br /><span class="label"><a 
 id="x1-8003r3"></a></span>PREFOLD&#x00A0;<br /><span class="label"><a 
 id="x1-8004r4"></a></span>&#x00A0;&#x00A0;&#x00A0;&#x00A0;WHEN&#x00A0;(NOT&#x00A0;((Hand&#x00A0;=&#x00A0;AA)&#x00A0;OR&#x00A0;(Hand&#x00A0;=&#x00A0;KK)))&#x00A0;FOLD&#x00A0;FORCE
           </div>
        <!--l. 172--><p class="indent" >     <img 
src="Actions0x.png" alt="PIC" class="graphics" width="526.03093pt" height="126.00354pt" ><!--tex4ht:graphics  
name="Actions0x.png" src="0E__OH_SVN_trunk_OpenPPL_OpenPPL_Manual_Chapters_images_PokerStars_Unstable_Gamestate.eps"  
--><br 
class="newline" />&#8221;Fold when I don&#8217;t have a good hand&#8221;. But here your good hand can not get
        recognized because your aces get only displayed partially. Your bot would fold
        pocket aces! To avoid problems like that it is recommend to code more fail-safe
        like in the first example: &#8220;Fold when I have a bad hand&#8221;. It won&#8217;t
        hurt that much if that command failed and worked only on the next
        heart-beat-cycle.
           </li>
        <li class="itemize">There are even more consequences of potentially unstable frames: OpenPPL
        does its main calculations when it is your turn. Especially some more complex
        symbols which depend on the history of the game get updated only when we
        have stable frames to guarantee their correctness &#8211; RaisesSinceLastPlay or
        LastCallerPosition are examples. As a consequence these symbols will
        simply be undefined before your first action preflop. Therefore it is
        recommended to be extra careful about the GIGO-principle and stick to the
        most basic symbols only. But this is not too hard for prefold, isn&#8217;t
        it?</li></ul>

   <h3 class="sectionHead"><a 
 id="x1-9000"></a>Backup actions</h3>
<!--l. 192--><p class="noindent" >It may happen, that a certain action is not available, e.g. you might want to raise by half
the pot, but this is currently not possible, e.g. because your opponent made a large raise
and half-pot would be less than the minimum. In such situations OpenPPL behaves in
the following ways:
           <ul class="itemize1">
        <li class="itemize">betsize invalid (to less or too much (PotLimit or more than your balance)):
        betsize  gets  automatically  adapted.  This  happens  also  to  actions  like
        RaisePot and RaiseHalfPot, that get executed with the f$betsize-function
        (formerly known as &#8220;f$swag&#8221;).
           </li>
        <li class="itemize">action can&#8217;t be executed, because it is not possible, e.g. there might be
        no raise-button, because you can only call (allin) or fold. Here OpenPPL
        behaves in the following way:
            <ul class="itemize2">
            <li class="itemize">RaisePot if RaiseMax is not possible
            </li>
            <li class="itemize">Raise(Min) if RaisePot or RaiseHalfPot is not possible
            </li>
            <li class="itemize">Call if no Raise is possible
            </li>
            <li class="itemize">Check if no Call is possible
            </li>
            <li class="itemize">Fold if no Check is possible (default behaviour of OpenHoldem).</li></ul>
        <!--l. 214--><p class="indent" >     This deviates from standard PPL again. However we have the following
        reasons:
            <ul class="itemize2">
            <li class="itemize">OpenHoldem evaluates its technical functions in the order above (for
            details please refer to the OpenHoldem Manual).
            </li>
            <li class="itemize">we believe, it is better to behave in a more conservative way if an
            error  occurs.  Most  probably  you  don&#8217;t  want  to  push  allin  if  you
            specify RaiseHalfPot as your desired action. With a min-raise you
            are probably more happy (or less unhappy).</li></ul>
        </li></ul>
    
</body></html> 



