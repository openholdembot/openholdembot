<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2014-09-06"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Converted document</title>
</head>
<body>
<div id="globalWrapper">
<h1 class="Chapter-">
<a class="toc" name="toc-Chapter--1"></a>Debugging Your Code
</h1>
<div class="Unindented">
Why debugging? If you code your bot or if you watch it play you will for sure find situations where the play doesn’t match your expectations. Sometimes you know immediatelly what you did wrong or at what place of the code you have to look for your error. But sometimes you don’t know or it might even seem, that everything looks ok on your side. So you might want to look a little bit deeper - at your code and maybe even at the symbol library. Here in this chapter we will show you some techniques to locate the problem:
</div>
<h2 class="Section-">
<a class="toc" name="toc-Section--1"></a>Working with the debug-tab
</h2>
<div class="Unindented">
OpenHoldem provides a cool feature called the debug-tab. Just open the formula-editor (for OH-script), switch to the f$debug-section and then you can enter your expressions. For example:
</div>
<div class="Indented">
<div class="listing">
<pre class="listing">= userchair
= HaveTopPair
</pre>
</div>

</div>
<div class="Indented">
Here userchair in a native OpenHoldem symbol and HaveTopPair is an OpenPPL-symbol. So once you have entered the symbols in question click &ldquo;Apply&rdquo; to confirm your input and &ldquo;Auto&rdquo; to turn the evaluator on. OpenHoldem will evaluate your expressions and show you their values. Anything wrong with them?
</div>
<div class="Indented">
<img class="embedded" src="images/debug_tab.png" alt="figure images/debug_tab.png" style="width: 577pt; max-width: 577px; height: 635pt; max-height: 635px;"/>

</div>
<div class="Indented">
Only one point might look strange on first sight: OpenHoldem reports a potsize of 65 whereas the correspondenting OpenPPL-symbols reports a value of 32.50. But there is an explanation for it: OpenHoldem calculates in dollars, OpenPPL in bets or big-blinds. So everything is correct with this screenshot.
</div>
<div class="Indented">
But if something is wrong, there might be several reasons:
</div>
<ul>
<li>
<i>incorrect input. </i>Have a look at OpenHoldems table display: everything ok?
</li>
<li>
<i>a problem with your code (or with the symbol library):</i> a symbol like for example StillToAct depends on other symbols like dealposition and nchairsdealtleft. So if StillToAct was wrong you might put these symbols into the debug-tab tooand evaluate further until you find the problem.
</li>

</ul>
<h2 class="Section-">
<a class="toc" name="toc-Section--2"></a>Simulating positions
</h2>
<div class="Unindented">
The debug-tab is a wonderful tool — but: the problem happened at a live-table — what can you do? There are two things you could try: Openholdem provides a tool called ManualMode. Here you can setup some situations to simulate your bot-logic. The other possibility: you could shoot so-called replay-frames, i.e. screenshots of the casino-table that get saved to the replay-directory in your bot-folder. Once the session is over you can load these frames with OHReplay.exe and connect OpenHoldem to OHReplay like to a normal casino-table. And then you can work with the debug-tab like described above. Please refer to OpenHoldems manual for a more detailed description of these tools.
</div>
<h2 class="Section-">
<a class="toc" name="toc-Section--3"></a>Investigating log-files
</h2>
<div class="Unindented">
Not satisfied with the play? You might also look at the autoplayer-log. It is stored in your bot-folder and named e.g. oh_0.log. OpenHoldem uses this file to not only store the action it took, but also the complete evaluation process. First watch out for your hand (you can identify it e.g. by the time, your cards, the hand-number, etc.). At first the log might look like a complete mess, but actually it is well structured: function-names on the very left are higher-level functions; symbols that are more indented got called by these higher-level functions. So what you see below is actually an evaluation-tree:
</div>
<div class="Indented">
<div class="listing">
<pre class="listing">f$rais=0.00 [Line: 2, Col: 18]
      f$OpenPPL_Raise=-7.00 [Line: 1, Col: 2]
      f$OpenPPL_Decision=-1.00 [Line: 1, Col: 19]
            betround=1.00
            f$preflop=-1.00 [Line: 10, Col: 62] 
                 f$OpenPPL_Raises=0.00 [Line: 1, Col: 1]
                        me_re_MemRaises=0.00
                  f$OpenPPL_Calls=0.00 [Line: 1, Col: 1]
                        me_re_MemCalls=0.00
                  f$OpenPPL_StillToAct=8.00 [Line: 1, Col: 42]
                        dealposition=4.00
                        nchairsdealtleft=6.00 
                 islist008=0.00
                 f$OpenPPL_Others=1.00 [Cached] 
                 f$OpenPPL_Fold=-1.00 [Line: 1, Col: 2]
</pre>
</div>

</div>
<div class="Indented">
The main logic of your translated OpenPPL-code gets evaluated by the socalled &ldquo;f$OpenPPL_Decision&rdquo; function. It first looks up &ldquo;betround&rdquo; (which is 1.00) and therefore decides to evaluate &ldquo;f$preflop&rdquo;. The &ldquo;f$preflop&rdquo;-function looks at &ldquo;Raises&rdquo; and &ldquo;Calls&rdquo;. Both get their values from pre-computed memory-symbols (as they depend on game-history). After that it evaluates StilltoAct (which further calculates its value depending on dealposition and nchairsdealtleft) and result to 8 (early position 2). As our hand is not in list008 (false = 0.00) OpenHoldem doesn’t continue here and finally reaches &ldquo;When Others Fold Force&rdquo;. Others is always true (coded as 1.00; and [Cached] simply means, that this symbol got evaluated in the past and its value got remembered). So Fold (coded as -1.00) is the action to be taken. Once this point gets reached, OpenHoldem evaluates f$preflop to -1.00 (Fold) and then f$Decision to -1.00. As Fold is something different than Raise (coded as -7.00) OpenHoldems autoplayer-function f$rais evaluates to false (0.00) and therefore OpenHoldem does not raise. It will then continue with f$call as described in OpenHoldems manual. Debugging causes brain-cancer, but for botters that’s a progress.
</div>
<h2 class="Section-">
<a class="toc" name="toc-Section--4"></a>Things to watch out for
</h2>
<ul>
<li>
<i>Incorrect hand-reset: </i>Most symbols depend only on the state of the table (cards, players, etc.) and are quite reliable. However there are some symbols, that depend on previous game-states, like BettingAction-symbols; these symbols reset whenever a new hand starts. Also user-defined variables will lose their value if a hand-reset occurs. These hand-resets can be triggered by certain events, like a changing dealer-chair or disappearing community cards, depending on your hand-reset-method defined in the tablemap. Depending on your settings it be might that an occlusion of the table will cause a hand-reset for OpenHoldem. So watch out for messages like below in your log-file.<div class="listing">
<pre class="listing">2012-01-21 19:50:17 -
************************************************************* 
HAND RESET (num:  dealer: 0 cards: KhKd): PartyPoker Table ###### - NL Hold’em $1/$2 
*************************************************************
2012-01-21 19:50:17 - ROUND 1
</pre>
</div>
If they appear in the middle of a hand, then you should revisit your hand-reset-method.
</li>
<li>
<i>Misread information: </i>Most problems (and most reported &ldquo;bugs&rdquo;) are of the from &ldquo;garbage in - garbage out&rdquo;. If OpenHoldem gets incorrect data from the scraper-engine (e.g. no seated players) then all further calculations by the symbol-engine and the evaluator will return bogus values. The reason is usually simple: a beginner with incorrect system settings or incorrect casino settings. Let us emphasize: Win2000 classic theme and all animations turned off are recommended, but not necessary. In pronciple you can scrape whatever configuration you like. However: if you use somebody elses tablemap, then you <i>have to</i> use exactly the same settings as the profile creator. So before you go crazy investigating log-files: have a look at basic OpenHoldem symbols: are they reasonable or plain wrong? And before you sit at a real-money-table observe your bot and OpenHoldems table-display for some time: does OpenHoldem recognize every game-state correctly? Don’t get frightened: <i>screenscraping is an easy and very flexible approach, that works great. But it requires some care from your side!</i>
</li>

</ul>
<h2 class="Section-">
<a class="toc" name="toc-Section--5"></a>Using Flags
</h2>
<div class="Unindented">
OpenHoldem provides a useful set of buttons with a number on it, from 0 to 19 called flags. When an OH flag button is pressed then corresponding symbol (f0..f19) will be true. For example our code could look like the following:
</div>
<div class="Indented">
<div class="listing">
<pre class="listing">WHEN betround=2 AND (BotRaisedBeforeFlop OR f0) Raise 50% FORCE 
</pre>
</div>

</div>
<div class="Indented">
The above line is true if bot raised before flop or flag 0 button has been pressed; This way you could simulate in Manual Mode custom conditions.
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.5 (2013-03-10)</a> on <span class="create-date">2014-09-06T11:32:43.312000</span>
</div>
</div>
</body>
</html>
