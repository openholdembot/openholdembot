
<!-- saved from url=(0470)http://72.30.186.176/search/srpcache?ei=UTF-8&p=links%3Ahttp%3A%2F%2Fwww.maxinmontreal.com%2Fwiki%2Findex.php5%2FPart_E%3A_Using_prwin1326+site%3Ahttp%3A%2F%2Fwww.maxinmontreal.com%2F&fr=sfp&u=http://cc.bingj.com/cache.aspx?q=links%3ahttp%3a%2f%2fwww.maxinmontreal.com%2fwiki%2findex.php5%2fPart_E%3a_Using_prwin1326++(site%3awww.maxinmontreal.com)&d=4978082827469502&mkt=en-US&setlang=en-US&w=XVHDd2Z1DQzXxWnOImydBsP5qp9h_otY&icp=1&.intl=us&sig=Ao47ylcGwSOBMFeOeytxnA-- -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><!--<base href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples">--><base href="."><!-- Banner:Start --><style type="text/css">#b_cpb{color: black; font: normal normal normal small normal arial,sans-serif} #b_cpb a{color: blue; text-decoration: underline; font-weight:normal}</style><!--LocalizedDate:4/16/2013--><!--InvariantDate:4/16/2013--></head><body class="mediawiki ns-0 ltr page-Part_B_Basic_overview_over_the_dll_structure_examples"><table width="100%" style="background-color:#fff; text-align:left;" border="1" bordercolor="#909090" cellpadding="5"><tbody><tr><td><span id="b_cpb"><!-- Title:Start --><div>You have reached the cached page for <strong><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples" h="ID=SERP,5003.1">http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples</a></strong></div><!-- Title:End --><!-- Content:Start --><div style="margin-top:1em;">Below is a snapshot of the Web page as it appeared on <strong>4/16/2013</strong>. This is the version of the page that was used for ranking your search results. The page may have changed since it was last cached. To see what might have changed (without the highlights), <a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples" h="ID=SERP,5003.2">go to the current page</a>.</div><!-- Content:End --><!-- Hit:Start --><div style="margin-top:1em;">You searched for: <!--HitHighlight:Start--><b style="color:#000;background:#ffff66">links</b>:http://www.<b style="color:#000;background:#66ffff">maxinmontreal</b>.com/<b style="color:#000;background:#ffcc99">wiki</b>/<b style="color:#000;background:#66ff99">index</b>.<b style="color:#000;background:#ff66ff">php5</b>/<b style="color:#fff;background:#cc0000">Part</b>_<b style="color:#fff;background:#0033cc">E</b>:_<b style="color:#fff;background:#996600">Using</b>_<b style="color:#fff;background:#6600cc">prwin1326</b>  (site:www.<b style="color:#000;background:#66ffff">maxinmontreal</b>.com)<!--HitHighlight:End--> We have highlighted matching words that appear in the page below.</div><!-- Hit:End --><!-- Disclaimer:Start --><div style="margin-top:1em;float:right"><span style="font-size:x-small;">Yahoo! is not responsible for the content of this page.</span></div><!-- Disclaimer:End --></span></td></tr></tbody></table><!-- Banner:End --><div style="position:relative">

	
		
				<meta name="keywords" content="Part B: Basic overview over the dll structure &amp; examples,Enhanced Prwin,OpenHoldem:EndUserDocumentation:Symbols,Part A: Compiling the first dll,Phl1k,Prw1326">
		<link rel="shortcut icon" href="http://www.maxinmontreal.com/favicon.ico">
		<link rel="search" type="application/opensearchdescription+xml" href="http://www.maxinmontreal.com/wiki/opensearch_desc.php" title="Maxin Wiki (English)">
		<title>Part B: Basic overview over the dll structure &amp; examples - Maxin Wiki</title>
		<style type="text/css" media="screen, projection">/*<![CDATA[*/
			@import "/wiki/skins/common/shared.css?97";
			@import "/wiki/skins/monobook/main.css?97";
		/*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/commonPrint.css">
		<!--[if lt IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE50Fixes.css?97";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/wiki/skins/monobook/IE55Fixes.css?97";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/wiki/skins/monobook/IE60Fixes.css?97";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/wiki/skins/monobook/IE70Fixes.css?97";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/wiki/skins/common/IEFixes.js?97"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type="text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/wiki/skins";
var wgArticlePath = "/wiki/index.php5/$1";
var wgScriptPath = "/wiki";
var wgScript = "/wiki/index.php5";
var wgServer = "http://www.maxinmontreal.com";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Part_B:_Basic_overview_over_the_dll_structure_\x26_examples";
var wgTitle = "Part B: Basic overview over the dll structure \x26 examples";
var wgAction = "view";
var wgRestrictionEdit = [];
var wgRestrictionMove = [];
var wgArticleId = "512";
var wgIsArticle = true;
var wgUserName = null;
var wgUserGroups = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "373284";
/*]]>*/</script>
                
		<script type="text/javascript" src="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/wikibits.js"><!-- wikibits js --></script><link rel="stylesheet" type="text/css" href="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/KHTMLFixes.css">
		<script type="text/javascript" src="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/index.php5"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/wiki/index.php5?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php5?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/wiki/index.php5?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
		<script type="text/javascript" src="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/ajax.js"></script>
	

	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 class="firstHeading"><b style="color:#fff;background:#cc0000">Part</b> B: Basic overview over the dll structure &amp; examples</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From Maxin <b style="color:#000;background:#ffcc99">Wiki</b></h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#column-one">navigation</a>, <a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#searchInput">search</a></div>			<!-- start content -->
			<p>If you are not following my guide from <a href="http://www.maxinmontreal.com/wiki/index.php5/Part_A:_Compiling_the_first_dll" title="Part A: Compiling the first dll"><b style="color:#fff;background:#cc0000">Part</b> A: Compiling the first dll</a> there might be slight differences you may find in the basic files you use, since i already added some code, which is needed anyway...
</p><p><b>Source(s):</b>  <a href="http://www.downloadranking.com/" class="external text" title="http://www.downloadranking.com" rel="nofollow">code solutions</a>
</p>
<table id="toc" class="toc" summary="Contents"><tbody><tr><td><div id="toctitle"><h2>Contents</h2> <span class="toctoggle">[<a id="togglelink" class="internal" href="javascript:toggleToc()">hide</a>]</span></div>
<ul>
<li class="toclevel-1"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#The_OH-DLL.cpp"><span class="tocnumber">1</span> <span class="toctext">The OH-DLL.cpp</span></a>
<ul>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#gws_function"><span class="tocnumber">1.1</span> <span class="toctext">gws function</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#hlset_.26_hlget"><span class="tocnumber">1.2</span> <span class="toctext">hlset &amp; hlget</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#process_query_function"><span class="tocnumber">1.3</span> <span class="toctext">process_query function</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#process_state_function"><span class="tocnumber">1.4</span> <span class="toctext">process_state function</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#The_OH-DLL.h_Header"><span class="tocnumber">2</span> <span class="toctext">The OH-DLL.h Header</span></a>
<ul>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#The_struct_holdem_state"><span class="tocnumber">2.1</span> <span class="toctext">The struct holdem_state</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#The_struct_holdem_player"><span class="tocnumber">2.2</span> <span class="toctext">The struct holdem_player</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#prw1326_Datastructures"><span class="tocnumber">2.3</span> <span class="toctext">prw1326 Datastructures</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#Examples"><span class="tocnumber">3</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#Accessing_information_from_the_.22struct.22_.22holdem_state.22"><span class="tocnumber">3.1</span> <span class="toctext">Accessing information from the "struct" "holdem_state"</span></a></li>
<li class="toclevel-2"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#A_function_returning_the_flush_rank_of_the_player"><span class="tocnumber">3.2</span> <span class="toctext">A function returning the flush rank of the player</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples#Files"><span class="tocnumber">4</span> <span class="toctext">Files</span></a></li>
</ul>


</td></tr></tbody></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="The_OH-DLL.cpp"></a><h3><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=1" title="Edit section: The OH-DLL.cpp">edit</a>]</span> <span class="mw-headline"> The OH-DLL.cpp </span></h3>
<pre>#define WHUSER_EXPORTS 

#include "OH-DLL.h"
#include &lt;windows.h&gt;

///////////////////////////////////// 
//card macros 
#define RANK(c)	         ((c&gt;&gt;4)&amp;0x0f) 
#define SUIT(c)          ((c&gt;&gt;0)&amp;0x0f) 
#define ISCARDBACK(c)	 (c==0xff) 
#define ISUNKNOWN(c)	 (c==0) 
///////////////////////////////////// 

//////////////////////////////////// 
//consecutive states 
holdem_state    m_holdem_state[256]; 
unsigned char   m_ndx; 
////////////////////////////////////

//////////////////////////////////// 
//versus list &amp; prwin
phl1k_t m_phl1k;
pp13 prw1326;
////////////////////////////////////

//////////////////////////////////// 
//WH symbols
pfgws_t m_pget_winholdem_symbol;
////////////////////////////////////

double gws(int chair, const char* name, bool&amp; iserr){ 
	return (*m_pget_winholdem_symbol)(chair,name,iserr); 
} 

double gws(const char* name){ 
	bool iserr; 
	int mychair = (int)gws(0,"userchair",iserr); 
	return gws(mychair,name,iserr); 
}

bool hlset( int rank0, int rank1, int listnum, bool onoff ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2] = onoff);
}

bool hlget( int rank0, int rank1, int listnum ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2]);
}

double process_query(const char* pquery){

	if(pquery==NULL)
		return 0;
	//example
	if(strcmp(pquery,"dll$test")==0)
		return 101;

	return 0;

}

double process_state(holdem_state* pstate){

	if(pstate!=NULL)
      m_holdem_state[ (++m_ndx)&amp;0xff ] = *pstate;

	return 0;

}
///////////////////////////////////////////////////// 
//WINHOLDEM RUNTIME ENTRY POINT 
///////////////////////////////////////////////////// 
WHUSER_API double process_message(const char* pmessage, const void* param){

	if(pmessage==NULL){
		return 0;
	}
	if(param==NULL){
		return 0;
	}
	if(strcmp(pmessage,"state")==0){
		return process_state( (holdem_state*)param );
	}
	if(strcmp(pmessage,"phl1k")==0){   
		m_phl1k = (phl1k_t)param;
		return 0;
	}
	if(strcmp(pmessage,"prw1326")==0){	
		prw1326 = (pp13)param;
		return 0;
	}
	if(strcmp(pmessage,"query")==0){ 
		return process_query((const char*)param);
	}
	if(strcmp(pmessage,"pfgws")==0){
		m_pget_winholdem_symbol = (pfgws_t)param;
		return 0;
	}

	return 0;

}
///////////////////////////////// 
//DLLMAIN 
///////////////////////////////// 
BOOL APIENTRY DllMain( HANDLE hModule, DWORD ul_reason_for_call, LPVOID lpReserved){

	switch(ul_reason_for_call){
		case DLL_PROCESS_ATTACH:
			break; 
		case DLL_THREAD_ATTACH:
			break; 
		case DLL_THREAD_DETACH:
			break; 
		case DLL_PROCESS_DETACH:
			break;
	}

	return TRUE;

}
</pre>
<a name="gws_function"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=2" title="Edit section: gws function">edit</a>]</span> <span class="mw-headline"> gws function </span></h4>
<pre>double gws(const char* name){ 
	bool iserr; 
	int mychair = (int)gws(0,"userchair",iserr); 
	return gws(mychair,name,iserr); 
}
</pre>
<p>This function you see here, is very important, because you can access all symbols, which are available for Openholdem with it. <br>
<b style="color:#fff;background:#0033cc">e</b>.g: gws("userchair") returns the value of the userchair symbol. <br>
</p>
<a name="hlset_.26_hlget"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=3" title="Edit section: hlset &amp; hlget">edit</a>]</span> <span class="mw-headline"> hlset &amp; hlget </span></h4>
<pre>bool hlset( int rank0, int rank1, int listnum, bool onoff ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2] = onoff);
}

bool hlget( int rank0, int rank1, int listnum ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2]);
}
</pre>
<p>These functions can be used to access and dynamically modify versus lists during play <b style="color:#fff;background:#0033cc">e</b>.g: 
</p>
<pre>    hlset( 14, 13, 5, 1);
</pre>
<p>this sets AKs on list 5 to true. More details can be found here <a href="http://www.maxinmontreal.com/wiki/index.php5/Phl1k" title="Phl1k">Phl1k</a>.
</p>
<a name="process_query_function"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=4" title="Edit section: process_query function">edit</a>]</span> <span class="mw-headline"> process_query function </span></h4>
<pre>double process_query(const char* pquery){

	if(pquery==NULL)
		return 0;
	//example
	if(strcmp(pquery,"dll$test")==0)
		return 101;

	return 0;

}
</pre>
<p>Inside this scope you can define symbols which you can access with the OH formula editor.
</p><p><b style="color:#fff;background:#0033cc">e</b>.g: If you add " = dll$test" in the OH formula editor in the debug tab, you'll get the value "101". You can experiment with it if you want and try some values from the gws function, but remember to recompile each time you change something in the code.
</p>
<a name="process_state_function"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=5" title="Edit section: process_state function">edit</a>]</span> <span class="mw-headline"> process_state function </span></h4>
<pre>double process_state(holdem_state* pstate){

	if(pstate!=NULL)
      m_holdem_state[ (++m_ndx)&amp;0xff ] = *pstate;

	return 0;

}
</pre>
<p>This function is called each time OH scrapes a new state, if you want to update values or some other functions you might code later you have to put some of it in this scope.
</p>
<a name="The_OH-DLL.h_Header"></a><h3><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=6" title="Edit section: The OH-DLL.h Header">edit</a>]</span> <span class="mw-headline"> The OH-DLL.h Header </span></h3>
<pre>#ifndef _whuser_h_
#define _whuser_h_

#ifdef WHUSER_EXPORTS
#define WHUSER_API __declspec(dllexport)
#else
#define WHUSER_API __declspec(dllimport)
#endif

struct holdem_player{

    char            m_name[16]         &nbsp;;	//player name if known
    double          m_balance          &nbsp;;	//player balance 
    double          m_currentbet       &nbsp;;	//player current bet
    unsigned char   m_cards[2]         &nbsp;;	//player cards

    unsigned char   m_name_known   &nbsp;: 1&nbsp;;	//0=no 1=yes
    unsigned char   m_balance_known&nbsp;: 1&nbsp;;	//0=no 1=yes
    unsigned char   m_fillerbits   &nbsp;: 6&nbsp;;	//filler bits
    unsigned char   m_fillerbyte       &nbsp;;	//filler bytes

};

struct holdem_state{

    char            m_title[64]        &nbsp;;	//table title
    double          m_pot[10]          &nbsp;;	//total in each pot

    unsigned char   m_cards[5]         &nbsp;;	//common cards

    unsigned char   m_is_playing   &nbsp;: 1&nbsp;;	//0=sitting-out, 1=sitting-in
    unsigned char   m_is_posting   &nbsp;: 1&nbsp;;	//0=autopost-off, 1=autopost-on
    unsigned char   m_fillerbits   &nbsp;: 6&nbsp;;	//filler bits

    unsigned char   m_fillerbyte       &nbsp;;	//filler byte
    unsigned char   m_dealer_chair     &nbsp;;	//0-9

    holdem_player   m_player[10]       &nbsp;;	//player records

};

struct sprw1326_chair{

	int	level;		//indicates weighting level for 'always consider'
	int	limit;		//max <b style="color:#000;background:#66ff99">index</b> into weight array - used for computational efficiency
	int	ignore;		//if non-zero no weighting will be applied to this chair
	int	rankhi[1326];	//higher ranked card number in pocket cards
	int	ranklo[1326];	//lower ranked card number in pocket cards
	int	weight[1326];	//the significance value for this hand
	double	scratch;	//for future reference 

};

struct sprw1326{

	int	useme;		//unless set to 1326 the normal OH prwin will be used
	int	preflop;	//unless set to 1326 the normal OH prwin will be used pre-flop
	int	usecallback;	//unless set to 1326 the callback function will not be invoked
	double	(*prw_callback)(void); //if enabled will be invoked before the prwin calculation pass
	double	scratch;	//for future reference
	int	bblimp;		//if non-zero no weighting will be applied if a chair has put nothing in the pot
	sprw1326_chair	vanilla_chair;	   //will be precalculated by OH at startup - convenience values
	sprw1326_chair  chair[10];  //structures for each chair

};

typedef double (*process_message_t)(const char* message, const void* param );
WHUSER_API double process_message( const char* message, const void* param );

typedef double (*pfgws_t)( int c, const char* psym, bool&amp; iserr );
typedef bool hl1k_t[1000][13][13];  // list number, rank0, rank1 - rank0&gt;=rank1 == suited, rank0&lt;rank1 == unsuited
typedef hl1k_t* phl1k_t;
typedef sprw1326* pp13;

#endif
</pre>
<p>Here you have some definitions of datatypes. The important definitions are the two structs, you can basically compare a "struct"-datatype to an object with some attributes, these attributes are accessed by <b style="color:#fff;background:#996600">using</b> the "." operator, look in the examples section below... <br><br>
</p>
<a name="The_struct_holdem_state"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=7" title="Edit section: The struct holdem_state">edit</a>]</span> <span class="mw-headline"> The struct holdem_state </span></h4>
<pre>struct holdem_state{

    char            m_title[64]        &nbsp;;	//table title
    double          m_pot[10]          &nbsp;;	//total in each pot

    unsigned char   m_cards[5]         &nbsp;;	//common cards

    unsigned char   m_is_playing   &nbsp;: 1&nbsp;;	//0=sitting-out, 1=sitting-in
    unsigned char   m_is_posting   &nbsp;: 1&nbsp;;	//0=autopost-off, 1=autopost-on
    unsigned char   m_fillerbits   &nbsp;: 6&nbsp;;	//filler bits

    unsigned char   m_fillerbyte       &nbsp;;	//filler byte
    unsigned char   m_dealer_chair     &nbsp;;	//0-9

    holdem_player   m_player[10]       &nbsp;;	//player records

};
</pre>
<p>- What you basically have here is the information of an OH state which was scraped  <br>
- You can access information like the tabletitle/potsize/dealerchair etc. ofc nothing new, as you have symbols for that at formula level <br>
- It also holds information about the players which is saved in the "struct" "holdem_player" <br><br>
</p>
<a name="The_struct_holdem_player"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=8" title="Edit section: The struct holdem_player">edit</a>]</span> <span class="mw-headline"> The struct holdem_player </span></h4>
<pre>struct holdem_player{

    char            m_name[16]         &nbsp;;	//player name if known
    double          m_balance          &nbsp;;	//player balance 
    double          m_currentbet       &nbsp;;	//player current bet
    unsigned char   m_cards[2]         &nbsp;;	//player cards

    unsigned char   m_name_known   &nbsp;: 1&nbsp;;	//0=no 1=yes
    unsigned char   m_balance_known&nbsp;: 1&nbsp;;	//0=no 1=yes
    unsigned char   m_fillerbits   &nbsp;: 6&nbsp;;	//filler bits
    unsigned char   m_fillerbyte       &nbsp;;	//filler bytes

};
</pre>
<p>- Pretty obvious that this contains information about the players at the table <br>
- You can access balances/currentbets/cards/names<br>
</p>
<a name="prw1326_Datastructures"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=9" title="Edit section: prw1326 Datastructures">edit</a>]</span> <span class="mw-headline"> prw1326 Datastructures</span></h4>
<p>You can find all information and examples on it in these articles <a href="http://www.maxinmontreal.com/wiki/index.php5/Prw1326" title="Prw1326">Prw1326</a>, <a href="http://www.maxinmontreal.com/wiki/index.php5/Enhanced_Prwin" title="Enhanced Prwin">Enhanced Prwin</a>.
</p>
<a name="Examples"></a><h3><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=10" title="Edit section: Examples">edit</a>]</span> <span class="mw-headline"> Examples </span></h3>
<a name="Accessing_information_from_the_.22struct.22_.22holdem_state.22"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=11" title="Edit section: Accessing information from the &quot;struct&quot; &quot;holdem_state&quot;">edit</a>]</span> <span class="mw-headline"> Accessing information from the "struct" "holdem_state" </span></h4>
<pre>double process_query(const char* pquery){

	if(pquery==NULL)
		return 0;
	//example
	if(strcmp(pquery,"dll$test")==0)
		return 101;
	if(strcmp(pquery,"dll$dealerchair")==0)
		return m_holdem_state[(m_ndx)&amp;0xff].m_dealer_chair;
	if(strcmp(pquery,"dll$currentbet3")==0)
		return m_holdem_state[(m_ndx)&amp;0xff].m_player[3].m_currentbet;

	return 0;

}
</pre>
<p>You can see in the code example above, how you have to use the point operator on a struct to access the information stored in the struct of the scraped state.
</p>
<a name="A_function_returning_the_flush_rank_of_the_player"></a><h4><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=12" title="Edit section: A function returning the flush rank of the player">edit</a>]</span> <span class="mw-headline"> A function returning the flush rank of the player </span></h4>
<p>For convinience we restructure the code, by adding another header file: <br>
</p><p>- Click on project -&gt; Add New Item -&gt; select "Header File (.h)" -&gt; name it "OH-general", you can also do it in the solution explorer by clicking on the "Header Files" folder <br>
</p>
<pre>///////////////////////////////////// 
//card macros 
#define RANK(c)	         ((c&gt;&gt;4)&amp;0x0f) 
#define SUIT(c)          ((c&gt;&gt;0)&amp;0x0f) 
#define ISCARDBACK(c)	 (c==0xff) 
#define ISUNKNOWN(c)	 (c==0) 
///////////////////////////////////// 

//////////////////////////////////// 
//consecutive states 
holdem_state    m_holdem_state[256]; 
unsigned char   m_ndx; 
////////////////////////////////////

//////////////////////////////////// 
//versus list &amp; prwin
phl1k_t m_phl1k;
pp13 prw1326;
////////////////////////////////////

//////////////////////////////////// 
//WH symbols
pfgws_t m_pget_winholdem_symbol;
////////////////////////////////////

double gws(int chair, const char* name, bool&amp; iserr){ 
	return (*m_pget_winholdem_symbol)(chair,name,iserr); 
} 

double gws(const char* name){ 
	bool iserr; 
	int mychair = (int)gws(0,"userchair",iserr); 
	return gws(mychair,name,iserr); 
}

bool hlset( int rank0, int rank1, int listnum, bool onoff ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2] = onoff);
}

bool hlget( int rank0, int rank1, int listnum ){
   return ((*m_phl1k)[listnum][rank0-2][rank1-2]);
}
</pre>
<p>- Cut / paste the code above from the "OH-DLL.cpp" file to the "OH-general.h" header file.
</p><p>- We will also need another include now, it's a standard library of C++, which contains a datatype called bitset <br>
- The bitset datatype converts integer values to their binary representation, we will need this because we are going to work with "srankbits" <br>
- You can read more about how rankbit values are obtained here: <a href="http://www.maxinmontreal.com/wiki/index.php5/OpenHoldem:EndUserDocumentation:Symbols" title="OpenHoldem:EndUserDocumentation:Symbols">OpenHoldem:EndUserDocumentation:Symbols</a>, look at the very bottom of the page <br>
- You can find documentation on the C++ library here: <a href="http://www.cppreference.com/wiki/stl/bitset/start" class="external free" title="http://www.cppreference.com/wiki/stl/bitset/start" rel="nofollow">http://www.cppreference.com/<b style="color:#000;background:#ffcc99">wiki</b>/stl/bitset/start</a> <br><br>
</p><p>After you're done with cut-pasting add the "bitset" include and also "<b style="color:#fff;background:#996600">using</b> namespace std;" this is neccessary line, don't think much about it, but the include would not work without it. Your OH-DLL.cpp includes section should look like this now:
</p>
<pre>#define WHUSER_EXPORTS 

#include "OH-DLL.h"
#include &lt;windows.h&gt;
#include &lt;bitset&gt;

<b style="color:#fff;background:#996600">using</b> namespace std;

#include "OH-general.h"
</pre>
<p>Now we can begin with the actual coding, in the next step open "OH-general.h" and add the following code:<br>
</p>
<pre>int srankhiplayer;
int srankbits;
int flushrank;
</pre>
<pre>int set_flush_rank(){

	bitset&lt;16&gt; srb( srankbits ); 

	srb = (~srb ) &gt;&gt;= srankhiplayer; 

	return (int)srb.count(); 
}
</pre>
<p>This function will determine the flush rank via some bitset operations, 1 - nutflush, 2 - 2nd nutflush, ...
</p>
<pre>void int_oh_symbols(){

	srankbits = (int)gws("srankbits");
	srankhiplayer = (int)gws("srankhiplayer");
	flushrank = set_flush_rank();

}
</pre>
<p>This function will update the values each time a new state is scraped.
</p><p>You also need to modify the "OH-DLL.cpp" to include this new symbol:
</p>
<pre>double process_query(const char* pquery){

	if(pquery==NULL)
		return 0;
	//example
	if(strcmp(pquery,"dll$test")==0)
		return 101;
	if(strcmp(pquery,"dll$dealerchair")==0)
		return m_holdem_state[(m_ndx)&amp;0xff].m_dealer_chair;
	if(strcmp(pquery,"dll$currentbet3")==0)
		return m_holdem_state[(m_ndx)&amp;0xff].m_player[3].m_currentbet;
	if(strcmp(pquery,"dll$flushrank")==0)
		return flushrank;

	return 0;

}
</pre>
<pre>double process_state(holdem_state* pstate){

	if(pstate!=NULL){m_holdem_state[ (++m_ndx)&amp;0xff ] = *pstate;}

	int_oh_symbols();

	return 0;

}
</pre>
<p>If all went well you can access the flush rank with "dll$flushrank" on formula lvl now.
</p>
<a name="Files"></a><h2><span class="editsection">[<a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit&section=13" title="Edit section: Files">edit</a>]</span> <span class="mw-headline"> Files </span></h2>
<ul><li><a href="http://www.maxinmontreal.com/wiki/index.php5/Image:OH-DLL-B.rar" title="Image:OH-DLL-B.rar">Image:OH-DLL-B.rar</a>
</li></ul>

<!-- Saved in parser cache with key maxin_wiki:pcache:idhash:512-0!1!0!!en!2 and timestamp 20130309070206 -->
<div class="printfooter">
Retrieved from "<a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples">http://www.<b style="color:#000;background:#66ffff">maxinmontreal</b>.com/<b style="color:#000;background:#ffcc99">wiki</b>/<b style="color:#000;background:#66ff99">index</b>.<b style="color:#000;background:#ff66ff">php5</b>/<b style="color:#fff;background:#cc0000">Part</b>_B:_Basic_overview_over_the_dll_structure_%26_examples</a>"</div>
						<!-- end content -->
			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
					 <li id="ca-nstab-main" class="selected"><a href="http://www.maxinmontreal.com/wiki/index.php5/Part_B:_Basic_overview_over_the_dll_structure_%26_examples" title="View the content page [ctrl-c]" accesskey="c">Article</a></li>
					 <li id="ca-talk"><a href="http://www.maxinmontreal.com/wiki/index.php5/Talk:Part_B:_Basic_overview_over_the_dll_structure_%26_examples" title="Discussion about the content page [ctrl-t]" accesskey="t">Discussion</a></li>
					 <li id="ca-edit"><a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=edit" title="You can edit this page. Please use the preview button before saving. [ctrl-e]" accesskey="e">Edit</a></li>
					 <li id="ca-history"><a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&action=history" title="Past versions of this page. [ctrl-h]" accesskey="h">History</a></li>
				</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="http://www.maxinmontreal.com/wiki/index.php5?title=Special:Userlogin&returnto=Part_B:_Basic_overview_over_the_dll_structure_%26_examples" title="You are encouraged to log in, it is not mandatory however. [ctrl-o]" accesskey="o">Log in / create account</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/wiki/skins/common/images/wiki.png);" href="http://www.maxinmontreal.com/"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class="portlet" id="p-navigation">
		<h5>Navigation</h5>
		<div class="pBody">
			<ul>
				<li id="n-mainpage"><a href="http://www.maxinmontreal.com/wiki/index.php5/Main_Page" title="Visit the Main Page [ctrl-z]" accesskey="z">Main Page</a></li>
				<li id="n-portal"><a href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Community_Portal" title="About the project, what you can do, where to find things">Community portal</a></li>
				<li id="n-currentevents"><a href="http://www.maxinmontreal.com/wiki/index.php5/Current_events" title="Find background information on current events">Current events</a></li>
				<li id="n-recentchanges"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Recentchanges" title="The list of recent changes in the wiki. [ctrl-r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Random" title="Load a random page [ctrl-x]" accesskey="x">Random page</a></li>
				<li id="n-help"><a href="http://www.maxinmontreal.com/wiki/index.php5/Help:Contents" title="The place to find out.">Help</a></li>
				<li id="n-sitesupport"><a href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Site_support" title="Support us">Donations</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://www.maxinmontreal.com/wiki/index.php5/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search Maxin Wiki [ctrl-f]" accesskey="f" value="">
				<input type="submit" name="go" class="searchButton" id="searchGoButton" value="Go">&nbsp;
				<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Search">
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Whatlinkshere/Part_B:_Basic_overview_over_the_dll_structure_%26_examples" title="List of all wiki pages that link here [ctrl-j]" accesskey="j">What <b style="color:#000;background:#ffff66">links</b> here</a></li>
				<li id="t-recentchangeslinked"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Recentchangeslinked/Part_B:_Basic_overview_over_the_dll_structure_%26_examples" title="Recent changes in pages linked from this page [ctrl-k]" accesskey="k">Related changes</a></li>
<li id="t-upload"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Upload" title="Upload images or media files [ctrl-u]" accesskey="u">Upload file</a></li>
<li id="t-specialpages"><a href="http://www.maxinmontreal.com/wiki/index.php5/Special:Specialpages" title="List of all special pages [ctrl-q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&printable=yes" title="Printable version of this page [ctrl-p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="http://www.maxinmontreal.com/wiki/index.php5?title=Part_B:_Basic_overview_over_the_dll_structure_%26_examples&oldid=373284" title="Permanent link to this version of the page">Permanent <b style="color:#000;background:#ffff66">link</b></a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="./Part B  Basic overview over the dll structure & examples - Maxin Wiki_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki"></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 03:08, 25 February 2013.</li>
				<li id="viewcount">This page has been accessed 8,349 times.</li>
				<li id="privacy"><a href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:Privacy_policy" title="Maxin Wiki:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:About" title="Maxin Wiki:About">About Maxin <b style="color:#000;background:#ffcc99">Wiki</b></a></li>
				<li id="disclaimer"><a href="http://www.maxinmontreal.com/wiki/index.php5/Maxin_Wiki:General_disclaimer" title="Maxin Wiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
</div>
<!-- Served in 0.106 secs. -->
</div><!-- syc110.search.ac2.yahoo.com compressed/chunked Thu May  9 19:27:05 UTC 2013 -->
</body></html>